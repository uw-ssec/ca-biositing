id: usda_data
name: USDA_Data
description: >
  Schema for USDA Census and Survey data records accessed via the NASS Quick
  Stats API, focusing on county-level data for key California crops.

prefixes:
  linkml: https://w3id.org/linkml/
  usda: https://schema.myorg.org/usda/
  agrovoc: https://agrovoc.fao.org/agrontology/en/page/
  ucum: http://unitsofmeasure.org/ucum.html

default_prefix: usda
imports:
  - linkml:types
  - ../common/geography

classes:
  USDARecord:
    description: Base class for USDA agricultural data records.
    annotations:
      __tablename__: usda_record
    slots:
      - year
      - geography
      - crop
      - variable
      - unit
      - value
      - bearing_status
      - class_desc
      - domain_desc
      - source
      - notes
    slot_usage:
      geography:
        range: Geography
      crop:
        range: CropEnum
      variable:
        range: VariableEnum
      unit:
        range: UnitEnum
      bearing_status:
        range: BearingStatusEnum

  CensusRecord:
    is_a: USDARecord
    description: A USDA Census of Agriculture record (every 5 years).
    annotations:
      __tablename__: census_record

  SurveyRecord:
    is_a: USDARecord
    description: A USDA Survey record (annual, seasonal, or periodic).
    annotations:
      __tablename__: survey_record
    slots:
      - period_desc
      - freq_desc
      - program_desc

slots:
  year:
    range: integer
    required: true
    description: Census or survey year.

  geography:
    range: Geography
    description: Geographic information (state, county, FIPS).

  crop:
    description: Commodity or crop name.
    exact_mappings: # TODO: map to AGROVOC crop concepts

  variable:
    description:
      Census or survey variable measured (e.g., Acreage, Yield, Production).
    exact_mappings: # TODO: map to AGROVOC variable concepts

  unit:
    description: Unit of measure (e.g., acres, tons, tons per acre).
    exact_mappings: # TODO: map to AGROVOC unit concepts

  value:
    range: float
    description: Reported numeric value.

  bearing_status:
    description: Bearing or nonbearing acreage (if applicable).

  class_desc:
    range: string
    description: Class description (e.g., BEARING, NONBEARING).

  domain_desc:
    range: string
    description: Domain category (e.g., TOTAL, CHEMICAL, AREA HARVESTED).

  period_desc:
    range: string
    description:
      For surveys, the time period of data collection (e.g., ANNUAL, MARCH).

  freq_desc:
    range: string
    description:
      For surveys, the frequency of data collection (e.g., ANNUAL, MONTHLY).

  program_desc:
    range: string
    description: Survey program name (e.g., FRUIT & TREE NUTS, VEGETABLES).

  source:
    range: string
    description: Data source citation (e.g., USDA NASS Quick Stats API).

  notes:
    range: string
    description: Supplemental notes or flags (e.g., (D) data suppressed).

enums:
  CropEnum:
    permissible_values:
      Almond:
        description: "TODO: AGROVOC c_330"
      Pistachio:
        description: "TODO: AGROVOC c_5733"
      Tomato:
        description: "TODO: AGROVOC c_7824"
      Olive:
        description: "TODO: AGROVOC c_5681"

  VariableEnum:
    permissible_values:
      ACREAGE_TOTAL:
        description: "TODO: AGROVOC mapping"
      ACREAGE_BEARING:
        description: "TODO: AGROVOC mapping"
      ACREAGE_NONBEARING:
        description: "TODO: AGROVOC mapping"
      YIELD:
        description: "TODO: AGROVOC mapping"
      PRODUCTION:
        description: "TODO: AGROVOC mapping"
      OPERATIONS:
        description: "TODO: AGROVOC mapping"

  UnitEnum:
    permissible_values:
      ACRES:
        description: "TODO: UCUM mapping"
      TONS:
        description: "TODO: UCUM mapping"
      TONS_PER_ACRE:
        description: "TODO: UCUM mapping"
      OPERATIONS:
        description: "TODO: AGROVOC or UCUM mapping"

  BearingStatusEnum:
    permissible_values:
      BEARING:
        description: "TODO: AGROVOC mapping"
      NONBEARING:
        description: "TODO: AGROVOC mapping"
      NA:
        description: "TODO: not applicable"
