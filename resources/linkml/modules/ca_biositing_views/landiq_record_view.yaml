id: https://w3id.org/ca_biositing/ca_biositing_views/landiq_record_view
name: landiq_record_view
prefixes:
  linkml: https://w3id.org/linkml/
imports:
  - linkml:types
  - ../core/base_entity
  - ../general_analysis/dataset

classes:
  LandiqRecordView:
    is_a: BaseEntity
    description: Denormalized LandIQ records with geometry.
    annotations:
      sql_schema: ca_biositing
      materialized: true
      sql_definition: >
        SELECT
          lr.record_id,
          p.geom,
          p.geoid,
          pap.name as crop_name,
          lr.acres,
          lr.irrigated,
          lr.confidence,
          lr.dataset_id
        FROM public.landiq_record lr JOIN public.polygon p ON lr.polygon_id =
        p.id JOIN public.primary_ag_product pap ON lr.main_crop = pap.id
    slots:
      - record_id
      - geom
      - geoid
      - crop_name
      - acres
      - irrigated
      - confidence
      - dataset_id

slots:
  record_id:
    range: string
  geom:
    range: string
  geoid:
    range: string
  crop_name:
    range: string
  acres:
    range: float
  irrigated:
    range: boolean
  confidence:
    range: integer
  dataset_id:
    range: Dataset
