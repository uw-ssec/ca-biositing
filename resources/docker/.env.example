# PostgreSQL Connection Settings
# ---
# Configuration for BioCirV ETL database and services

# 1. Individual Connection Parameters
# These are used by docker-compose to initialize the PostgreSQL container.
POSTGRES_HOST=${POSTGRES_HOST:-db}
POSTGRES_USER=biocirv_user
POSTGRES_DB=biocirv_db
POSTGRES_PASSWORD=biocirv_dev_password

# 2. Host Port Mapping
# This is the port on your local machine that will connect to the container's port 5432.
POSTGRES_PORT=5432

# 3. Application Database URL
# This is the full connection string used by the Python application (e.g., SQLAlchemy, Alembic)
# to connect to the database container.
# Note:
#   - It uses the service name 'db' as the host, which is how containers talk to each other.
#   - It uses the internal port '5432', not the host port.
DATABASE_URL=postgresql+psycopg2://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/biocirv_db

# 4. Prefect Settings
# Prefect API URL for workers and flows
PREFECT_API_URL=http://0.0.0.0:4200/api
PREFECT_SERVER_API_HOST=0.0.0.0
PREFECT_UI_API_URL=http://0.0.0.0:4200/api

# 5. Prefect Database Settings
# Prefect server uses PostgreSQL for persistence
PREFECT_API_DATABASE_CONNECTION_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/prefect_db
